[!IF "as:modconf('Eth')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantLinkTime'"!]
/*
 * TEXAS INSTRUMENTS TEXT FILE LICENSE
 *
 * Copyright (c) 2022-2023 Texas Instruments Incorporated
 *
 * All rights reserved not granted herein.
 *
 * Limited License.
 *
 * Texas Instruments Incorporated grants a world-wide, royalty-free, non-exclusive
 * license under copyrights and patents it now or hereafter owns or controls to
 * make, have made, use, import, offer to sell and sell ("Utilize") this software
 * subject to the terms herein. With respect to the foregoing patent license,
 * such license is granted solely to the extent that any such patent is necessary
 * to Utilize the software alone. The patent license shall not apply to any
 * combinations which include this software, other than combinations with devices
 * manufactured by or for TI ("TI Devices"). No hardware patent is licensed hereunder.
 *
 * Redistributions must preserve existing copyright notices and reproduce this license
 * (including the above copyright notice and the disclaimer and (if applicable) source
 * code license limitations below) in the documentation and/or other materials provided
 * with the distribution.
 *
 * Redistribution and use in binary form, without modification, are permitted provided
 * that the following conditions are met:
 * No reverse engineering, decompilation, or disassembly of this software is
 * permitted with respect to any software provided in binary form.
 * Any redistribution and use are licensed by TI for use only with TI Devices.
 * Nothing shall obligate TI to provide you with source code for the software
 * licensed and provided to you in object code.
 *
 * If software source code is provided to you, modification and redistribution of the
 * source code are permitted provided that the following conditions are met:
 * Any redistribution and use of the source code, including any resulting derivative
 * works, are licensed by TI for use only with TI Devices.
 * Any redistribution and use of any object code compiled from the source code
 * and any resulting derivative works, are licensed by TI for use only with TI Devices.
 *
 * Neither the name of Texas Instruments Incorporated nor the names of its suppliers
 * may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * DISCLAIMER.
 *
 * THIS SOFTWARE IS PROVIDED BY TI AND TI'S LICENSORS "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL TI AND TI'S
 * LICENSORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 /**
 *  \file     Eth_Lcfg.c
 *
 *  \brief    This file contains generated link time configuration file
 *            for ETH MCAL driver
 */

/*******************************************************************************
    Project: [!"$project"!]
    This file is generated by EB Tresos
    Do not modify this file, otherwise the software may behave in unexpected way
*******************************************************************************/

/*******************************************************************************
 * Standard Header Files
 ******************************************************************************/

/*******************************************************************************
 * Other Header Files
 ******************************************************************************/
#include "Eth.h"

/*******************************************************************************
 *  Version Check
 ******************************************************************************/

/*  Version checking  */
#if ((ETH_SW_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U))||(ETH_SW_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
  #error "Version numbers of Eth_Lcfg.c and Eth.h are inconsistent!"
#endif

#if ((ETH_CFG_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U)) || (ETH_CFG_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
  #error "Version numbers of Eth_Lcfg.c and Eth_Cfg.h are inconsistent!"
#endif

/*******************************************************************************
 * Constants for Post-Build Configuration
 ******************************************************************************/
#define  ETH_START_SEC_CONFIG_DATA
#include "Eth_MemMap.h"

#ifdef __cplusplus
extern "C" {
#endif

[!AUTOSPACING!]

[!VAR "notifyFxnList" = "' '"!]
[!LOOP "as:modconf('Eth')[1]/EthConfigSet/EthCtrlConfig/*"!][!//
[!IF "not(node:empty(EthCacheFlushOps)) and not(text:match(EthCacheFlushOps,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(EthCacheFlushOps)))"!][!//
[!"concat('extern void ',EthCacheFlushOps,'(uint8 *BufPtr, uint32 LenByte);')"!]
[!VAR "notifyFxnList" = "concat($notifyFxnList,' ',EthCacheFlushOps)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!IF "not(node:empty(EthInvalidateOps)) and not(text:match(EthInvalidateOps,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(EthInvalidateOps)))"!][!//
[!"concat('extern void ',EthInvalidateOps,'(uint8 *BufPtr, uint32 LenByte);')"!]
[!VAR "notifyFxnList" = "concat($notifyFxnList,' ',EthInvalidateOps)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//


/* generation of runtime configuration       */
/*<ETH_CONFIG>*/
[!LOOP "as:modconf('Eth')[1]/EthConfigSet/EthCtrlConfig/*"!]
[!IF "as:modconf('Eth')[1]/EthGeneral/EthTrafficShapingSupport = 'true'"!]
[!VAR "VarRateLimit" = "0"!]
[!ENDIF!]
VAR(struct Eth_ConfigType_s, ETH_LCFG)
    Eth_Config =
{
       .ctrlIdx = [!"EthCtrlIdx"!]U,
	   .portIdx = [!"EthPort"!],
       .portCfg =
       {
            .macCfg =
            {
                [!VAR "macModeFlag" = "'(0U '"!]
                [!LOOP "EthPortConfig/EthMacConfig/EthMacModeFlags/*"!]
                    [!VAR "macModeFlag"="concat($macModeFlag,' | ',.)"!]
                [!ENDLOOP!]
                [!VAR "macModeFlag"="concat($macModeFlag," )")"!]
                .macModeFlags = [!"$macModeFlag"!],
                .macConnectionType = (Eth_MacConnectionType)[!"EthPortConfig/EthMacConfig/EthMacConnectionType"!],
                .macAddr =
                {
                    [!IF "not(node:empty(EthCtrlPhyAddress/*))"!]
                    [!LOOP "text:split(EthCtrlPhyAddress/*,'-')"!]
                    0x[!"."!]U,
                    [!ENDLOOP!]
                    [!ELSE!]
                    NULL_PTR,NULL_PTR,NULL_PTR,NULL_PTR,NULL_PTR,NULL_PTR
                    [!ENDIF!]
                },
            },
            [!IF "as:modconf('Eth')[1]/EthGeneral/EthTrafficShapingSupport = 'true'"!][!//
            .shaperCfg =
            {
                [!VAR "ConfigCount" = "0"!][!//
                [!LOOP "EthCtrlConfigEgress/EthCtrlConfigShaper/*"!][!//
                {
                    .queueNum = (uint8)[!"node:ref(./EthCtrlConfigShaperPredecessorFifoRef)/EthCtrlConfigEgressFifoIdx"!]U,
                    .idleSlope = [!IF "not(node:empty(EthCtrlConfigShaperIdleSlope/__1))"!] (uint32)[!"EthCtrlConfigShaperIdleSlope/__1"!]U,[!ELSE!]0U,[!ENDIF!][!CR!]
                },
                [!VAR "ConfigCount" = "$ConfigCount+1"!][!//
                [!ENDLOOP!][!//
                [!FOR "x" = "$ConfigCount" TO "7"!][!//
                {
                    .queueNum = (uint8)ETH_PRIORITY_QUEUE_NUM, /* Invalid queue */
                    .idleSlope = 0U,
                },
                [!ENDFOR!][!//
            },
            [!ENDIF!][!//
       },

[!IF "EthCtrlEnableMii = 'true'"!]
#if (STD_ON == ETH_ENABLE_MII_API)
       .mdioCfg =
       {
           [!LOOP "EthMdioConfig/*"!]
           .mdioBusFreq = (uint32)[!"EthMdioBusFreq"!]U,
           .mdioClockFreq = (uint32) [!"EthMdioClockFreq"!]U
           [!ENDLOOP!]
       },
#endif
[!ENDIF!]
       .cpdmaCfg =
       {
            .pacingClkFreq = (uint32)[!"EthCpdmaConfig/EthPacingClkFreq"!]U,
            .rxInterruptPacingEnabled = (uint32) [!"text:toupper(EthCpdmaConfig/EthRxInterruptPacingEnabled)"!],
            .rxInterruptsPerMsec = [!"EthCpdmaConfig/EthRxInterruptPerMsec"!]U,
            .txInterruptPacingEnabled = (uint32) [!"text:toupper(EthCpdmaConfig/EthTxInterruptPacingEnabled)"!],
            .txInterruptsPerMsec = [!"EthCpdmaConfig/EthTxInterruptPerMsec"!]U,
            .dmaModeFlags = [!"EthCpdmaConfig/EthDmaModeFlags"!]U,
            .rxThreshCount = [!"EthCpdmaConfig/EthRxThresholdCount"!]U,
       },
#if (ETH_GLOBALTIMESUPPORT_API == STD_ON)
       .cptsCfg =
       {
           [!LOOP "EthCptsConfig/*"!]
           .cptsInputFreq = [!"EthCptsInputFreq"!]U,
           .vlanType      = [!"EthCptsVlanType"!],
           .msgTypeCfg    = (0U
                            [!LOOP "EthCptsMessageCfg/*"!]
                            | [!"EthCptsMessageCfgEnum"!]
                            [!ENDLOOP!]
                            )
           [!ENDLOOP!]
       },
#endif
       .enableCacheOps = (uint32)[!"text:toupper(string(EthEnableCacheOps))"!],

       .cacheFlushOps = (Eth_CacheFlushType) [!IF "EthEnableCacheOps = 'true'"!][!"EthCacheFlushOps"!][!ELSE!]NULL_PTR[!ENDIF!],

       .cacheInvalidateOps = (Eth_CacheInvalidateType) [!IF "EthEnableCacheOps = 'true'"!][!"EthInvalidateOps"!][!ELSE!]NULL_PTR[!ENDIF!]
};
[!ENDLOOP!]
/*</ETH_CONFIG>*/

#ifdef __cplusplus
}
#endif
#define  ETH_STOP_SEC_CONFIG_DATA
#include "Eth_MemMap.h"

#define  ETH_START_SEC_VAR_INIT_UNSPECIFIED
#include "Eth_MemMap.h"
#ifdef __cplusplus
extern "C" {
#endif
/**
 *  \brief Eth  controller configuration set pointer
 */
P2CONST(Eth_ConfigType, ETH_VAR_NO_INIT, ETH_APPL_CONST) Eth_CfgPtr;

#ifdef __cplusplus
}
#endif
#define  ETH_STOP_SEC_VAR_INIT_UNSPECIFIED
#include "Eth_MemMap.h"

/*******************************************************************************
 *  End of File: Eth_Lcfg.c
 ******************************************************************************/
[!ELSE!]
/* The last generated configuration variant is not
       LINK-TIME variant. Refer Eth_Cfg.c/Eth_PBcfg.c. */
[!ENDIF!]
