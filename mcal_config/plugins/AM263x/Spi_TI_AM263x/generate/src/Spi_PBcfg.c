[!IF "as:modconf('Spi')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPostBuild'"!]
/*
 * TEXAS INSTRUMENTS TEXT FILE LICENSE
 *
 * Copyright (c) 2022-2023 Texas Instruments Incorporated
 *
 * All rights reserved not granted herein.
 *
 * Limited License.
 *
 * Texas Instruments Incorporated grants a world-wide, royalty-free, non-exclusive
 * license under copyrights and patents it now or hereafter owns or controls to
 * make, have made, use, import, offer to sell and sell ("Utilize") this software
 * subject to the terms herein. With respect to the foregoing patent license,
 * such license is granted solely to the extent that any such patent is necessary
 * to Utilize the software alone. The patent license shall not apply to any
 * combinations which include this software, other than combinations with devices
 * manufactured by or for TI ("TI Devices"). No hardware patent is licensed hereunder.
 *
 * Redistributions must preserve existing copyright notices and reproduce this license
 * (including the above copyright notice and the disclaimer and (if applicable) source
 * code license limitations below) in the documentation and/or other materials provided
 * with the distribution.
 *
 * Redistribution and use in binary form, without modification, are permitted provided
 * that the following conditions are met:
 * No reverse engineering, decompilation, or disassembly of this software is
 * permitted with respect to any software provided in binary form.
 * Any redistribution and use are licensed by TI for use only with TI Devices.
 * Nothing shall obligate TI to provide you with source code for the software
 * licensed and provided to you in object code.
 *
 * If software source code is provided to you, modification and redistribution of the
 * source code are permitted provided that the following conditions are met:
 * Any redistribution and use of the source code, including any resulting derivative
 * works, are licensed by TI for use only with TI Devices.
 * Any redistribution and use of any object code compiled from the source code
 * and any resulting derivative works, are licensed by TI for use only with TI Devices.
 *
 * Neither the name of Texas Instruments Incorporated nor the names of its suppliers
 * may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * DISCLAIMER.
 *
 * THIS SOFTWARE IS PROVIDED BY TI AND TI'S LICENSORS "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL TI AND TI'S
 * LICENSORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 *  \file     Spi_PBcfg.c
 *
 *  \brief    This file contains generated post build configuration file
 *            for SPI MCAL driver
 */

  /*****************************************************************************
    Project: [!"$project"!]
    This file is generated by EB Tresos
    Do not modify this file, otherwise the software may behave in unexpected way
 ******************************************************************************/
/*******************************************************************************
 *  INCLUDES
 ******************************************************************************/
#include "Spi.h"
#include "Spi_Irq.h"


/*******************************************************************************
 *  VERSION CHECK
 ******************************************************************************/
#if ((SPI_SW_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U)) || (SPI_SW_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
  #error "Version numbers of Spi_PBcfg.c and Spi.h are inconsistent!"
#endif
/*******************************************************************************
 *  LOCAL CONSTANT MACROS
 ******************************************************************************/

/*******************************************************************************
 *  LOCAL FUNCTION MACROS
 ******************************************************************************/

/*******************************************************************************
 *  LOCAL DATA TYPES AND STRUCTURES
 ******************************************************************************/

/*******************************************************************************
 *  LOCAL DATA PROTOTYPES
 ******************************************************************************/

/*******************************************************************************
 *  GLOBAL DATA
 ******************************************************************************/
#define  SPI_START_SEC_CONFIG_DATA
#include "Spi_MemMap.h"
/* generation of runtime configuration       */

#ifdef __cplusplus
extern "C" {
#endif

[!AUTOSPACING!]

[!VAR "notifyFxnList" = "' '"!]

/*
 *Design: MCAL-14193, MCAL-14196, MCAL-14195, MCAL-14194, MCAL-14192, MCAL-14183, MCAL-14182, MCAL-14184, MCAL-14187, MCAL-14186, MCAL-14189
 */

[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
[!LOOP "SpiJob/*"!][!//
[!IF "not(node:empty(SpiJobEndNotification/*)) and not(text:match(SpiJobEndNotification/*,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(SpiJobEndNotification/*)))"!][!//
[!"concat('extern void ',SpiJobEndNotification/*,'(void);')"!]
[!VAR "notifyFxnList" = "concat($notifyFxnList,' ',SpiJobEndNotification/*)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//

/*
 *Design: MCAL-14211, MCAL-14212, MCAL-14206, MCAL-14209, MCAL-14210, MCAL-14201, MCAL-14205, MCAL-14213, MCAL-14207, MCAL-14215, MCAL-14223, MCAL-14204, MCAL-14236,
 */

[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
[!LOOP "SpiSequence/*"!][!//
[!IF "not(node:empty(SpiSeqEndNotification/*)) and not(text:match(SpiSeqEndNotification/*,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(SpiSeqEndNotification/*)))"!][!//
[!"concat('extern void ',SpiSeqEndNotification/*,'(void);')"!]
 [!VAR "notifyFxnList" = "concat($notifyFxnList,' ',SpiSeqEndNotification/*)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//

[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
CONST(struct Spi_ConfigType_s, SPI_CONFIG_DATA) Spi_Config =
{
[!WS "4"!].maxChannels = [!"SpiMaxChannel/*"!]U,
[!WS "4"!].maxJobs = [!"SpiMaxJob/*"!]U,
[!WS "4"!].maxSeq  = [!"SpiMaxSequence/*"!]U,
[!WS "4"!].maxHwUnit = [!"SpiMaxHwUnit"!]U,
[!WS "4"!].maxExtDevCfg = [!"SpiMaxExternalDeviceConfig"!]U,
[!WS "4"!].channelCfg =
[!WS "4"!]{
[!WS "4"!][!LOOP "SpiChannel/*"!]
[!WS "4"!][!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].channelBufType = [!"concat('SPI_',SpiChannelType)"!],
[!IF "as:modconf('Spi')[1]/SpiGeneral/SpiChannelBuffersAllowed = '1'"!][!//
[!IF "SpiChannelType = 'IB'"!][!//
[!ERROR "SpiChannelBuffersAllowed parameter should be selected as EB or IB/EB or SpiChannelType should be EB"!][!//
[!ENDIF!][!//
[!ELSEIF "as:modconf('Spi')[1]/SpiGeneral/SpiChannelBuffersAllowed = '0'"!][!//
[!IF "SpiChannelType = 'EB'"!][!//
[!ERROR "SpiChannelBuffersAllowed parameter should be selected as IB or IB/EB or SpiChannelType should be IB"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].dataWidth = [!"SpiDataWidth"!]U,
[!IF "SpiDataWidth < '9'"!][!//
[!VAR "BufWidth" = "1"!][!//
[!ELSEIF "SpiDataWidth < '17'"!][!//
[!VAR "BufWidth" = "2"!][!//
[!ELSE!][!//
[!VAR "BufWidth" = "4"!][!//
[!ENDIF!][!//
[!VAR "SpiChannelIBBufferMaxLength" = "as:modconf('Spi')[1]/SpiGeneral/SpiChannelInternalBufferMaxLength"!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].defaultTxData = [!IF "not(node:empty(SpiDefaultData/*))"!][!"SpiDefaultData/*"!]U[!ELSE!]0U[!ENDIF!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].maxBufLength = [!IF "SpiChannelType = 'EB'"!][!"SpiEbMaxLength"!]U[!ELSE!][!"SpiIbNBuffers"!]U[!ENDIF!],
[!IF "as:modconf('Spi')[1]/SpiGeneral/SpiChannelBuffersAllowed != '1'"!]
[!IF "SpiChannelType = 'IB'"!]
[!IF "SpiIbNBuffers * num:i($BufWidth) > num:i($SpiChannelIBBufferMaxLength) "!][!//
[!ERROR "Value of maxBufLength should be less than or equal to the SPI configuration SPI_IB_MAX_LENGTH in case of Internal Buffer(Refer SWS_Spi_00437)!!"!]
[!ENDIF!]
[!ENDIF!]
[!ENDIF!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].transferType = [!"concat('SPI_',SpiTransferStart)"!],
[!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!ENDLOOP!]
[!WS "4"!]},
[!WS "4"!].jobCfg =
[!WS "4"!]{
[!WS "4"!][!LOOP "SpiJob/*"!]
[!WS "4"!][!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].jobPriority = [!"concat('SPI_JOB_PRIORITY_',SpiJobPriority)"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].hwUnitId = [!"node:value(node:ref(node:current()/SpiHwUnitAssignment)/SpiHwUnitType)"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].Spi_JobEndNotification = [!IF "not(node:empty(SpiJobEndNotification/*))"!][!"SpiJobEndNotification/*"!][!ELSE!]NULL_PTR[!ENDIF!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].channelPerJob = [!"num:i(count(SpiChannelList/*))"!]U,
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].channelList =
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]{
                                        [!LOOP "SpiChannelList/*"!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][[!"SpiChannelIndex"!]] = [!"node:value(node:ref(node:current()/SpiChannelAssignment)/SpiChannelId)"!]U,
                                        [!ENDLOOP!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!ENDLOOP!]
[!WS "4"!]},
[!WS "4"!].seqCfg =
[!WS "4"!]{
[!WS "4"!][!LOOP "SpiSequence/*"!]
[!WS "4"!][!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].seqInterruptible = (uint8) [!"text:toupper(SpiInterruptibleSequence)"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].Spi_SequenceEndNotification = [!IF "not(node:empty(SpiSeqEndNotification/*))"!][!"SpiSeqEndNotification/*"!][!ELSE!]NULL_PTR[!ENDIF!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].jobPerSeq = [!"num:i(count(SpiJobAssignment/*))"!]U,
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].jobList =
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]{
                                        [!LOOP "SpiJobAssignment/*"!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!"node:value(node:ref(node:current())/SpiJobId)"!]U,
                                        [!ENDLOOP!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!ENDLOOP!]
[!WS "4"!]},
[!WS "4"!].hwUnitCfg =
[!WS "4"!]{
[!WS "4"!][!LOOP "SpiHwUnitConfig/*"!]
[!WS "4"!][!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].hwUnitId = [!"SpiHwUnitType"!],
[!IF "SpiHwUnitDmaEnable = 'true'"!][!//
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].enableDmaMode = (boolean)TRUE,
[!IF "node:empty(./SpiHwUnitCddDmaTxHandler) or node:empty(./SpiHwUnitCddDmaRxHandler)"!][!//
[!ERROR!]"Reference to the DMA Handler ID cannot be EMPTY for DMA-enabled SPI HwUnit"[!ENDERROR!][!//
[!ELSE!][!//
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].dmaTxHandlerID = CddDmaConf_[!"name(node:ref(SpiHwUnitCddDmaTxHandler))"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].dmaRxHandlerID = CddDmaConf_[!"name(node:ref(SpiHwUnitCddDmaRxHandler))"!],
[!ENDIF!][!//
[!ELSE!][!//
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].enableDmaMode = (boolean)FALSE,
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].dmaTxHandlerID = 0U,
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].dmaRxHandlerID = 0U,
[!ENDIF!]
[!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!ENDLOOP!]
[!WS "4"!]},
[!WS "4"!].extDevCfg =
[!WS "4"!]{
[!WS "4"!][!LOOP "SpiExternalDevice/*"!]
[!WS "4"!][!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!].mcspi =
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].csEnable = (uint16) [!IF "SpiEnableCs = 'true'"!]TRUE[!ELSE!]FALSE[!ENDIF!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].csMode   = [!"SpiCsMode"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].csPolarity = [!"concat('SPI_',SpiCsPolarity)"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].csIdleTime = [!"SpiCsIdleTime"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].clkDivider = [!"SpiExtDeviceClockDivider"!]U,
                                       [!IF "SpiShiftClockIdleLevel = 'LOW'"!]
                                       [!IF "SpiDataShiftEdge = 'TRAILING'"!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].clkMode = SPI_CLK_MODE_0,
                                       [!ELSE!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].clkMode = SPI_CLK_MODE_1,
                                       [!ENDIF!]
                                       [!ELSE!]
                                       [!IF "SpiDataShiftEdge = 'TRAILING'"!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].clkMode = SPI_CLK_MODE_2,
                                       [!ELSE!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].clkMode = SPI_CLK_MODE_3,
                                       [!ENDIF!]
                                       [!ENDIF!]
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].txRxMode     = [!"SpiExternalDeviceConfigMCSPI/SpiExtDeviceMCSPITxRxMode"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].startBitEnable =  (uint16) [!IF "SpiExternalDeviceConfigMCSPI/SpiExtDeviceMCSPIStartBitEnable = 'true'"!]TRUE[!ELSE!]FALSE[!ENDIF!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].startBitLevel  = [!"SpiExternalDeviceConfigMCSPI/SpiExtDeviceMCSPIStartBitLevel"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].receptionLineEnable  = [!"SpiExternalDeviceConfigMCSPI/SpiExtDeviceMCSPIDataLineSelectReception"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!].transmissionLineEnable  = [!"SpiExternalDeviceConfigMCSPI/SpiExtDeviceMCSPIDataLineSelectTransmission"!],
[!WS "4"!][!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!WS "4"!][!WS "4"!]},
[!WS "4"!][!ENDLOOP!]
[!WS "4"!]},
};
[!ENDLOOP!][!//

[!VAR "SpiChannelIndex" = "0"!][!//
[!VAR "SpiJobIndex" = "0"!][!//
[!VAR "SpiSequenceIndex" = "0"!][!//
[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
[!LOOP "SpiChannel/*"!][!//
[!VAR "SpiChannelIndex" = "$SpiChannelIndex+1"!][!//
[!ENDLOOP!][!//
[!LOOP "SpiJob/*"!]
[!VAR "SpiJobIndex" = "$SpiJobIndex+1"!]
[!ENDLOOP!][!//
[!LOOP "SpiSequence/*"!][!//
[!VAR "SpiSequenceIndex" = "$SpiSequenceIndex+1"!]
[!ENDLOOP!][!//
[!ENDLOOP!][!//


[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
CONST(Spi_ChannelConfigType_PC, SPI_CONFIG_DATA) Spi_ChannelConfig_PC[SPI_MAX_CHANNELS] =
{
[!LOOP "SpiChannel/*"!][!//
[!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!].channelId = SpiConf_SpiChannel_[!"@name"!],
[!WS "4"!][!WS "4"!]},
[!ENDLOOP!][!//
};
[!ENDLOOP!][!//

[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
CONST(Spi_JobConfigType_PC, SPI_CONFIG_DATA) Spi_JobConfig_PC[SPI_MAX_JOBS] =
{
[!LOOP "SpiJob/*"!]
[!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!].jobId = SpiConf_SpiJob_[!"@name"!],
[!WS "4"!][!WS "4"!][!WS "4"!].csPin = SpiConf_SpiExternalDevice_CS[!"@index"!],
[!WS "4"!][!WS "4"!][!WS "4"!].externalDeviceCfgId = (uint8)[!"node:value(node:ref(node:current()/SpiDeviceAssignment)/SpiExternalDeviceId)"!],
[!WS "4"!][!WS "4"!]},
[!ENDLOOP!][!//
};
[!ENDLOOP!][!//

[!LOOP "as:modconf('Spi')[1]/SpiDriver"!][!//
CONST(Spi_SeqConfigType_PC, SPI_CONFIG_DATA) Spi_SeqConfig_PC[SPI_MAX_SEQ] =
{
[!LOOP "SpiSequence/*"!][!//
[!WS "4"!][[!"@index"!]] =
[!WS "4"!][!WS "4"!]{
[!WS "4"!][!WS "4"!][!WS "4"!].seqId = SpiConf_SpiSequence_[!"@name"!],
[!WS "4"!][!WS "4"!]},
[!ENDLOOP!][!//
};
[!ENDLOOP!][!//



/**
 *  \brief This type defines a range of HW SPI Hardware microcontroller
 *         peripheral allocated to this Job
 */
const uint32 Spi_HwUnitBaseAddr[SPI_HW_UNIT_CNT] =
{


   0x52200000 ,      	            /* MCSPI0 */
   0x52201000 ,      	    /* MCSPI1 */
   0x52202000 ,      	    /* MCSPI2 */
   0x52203000 ,      	    /* MCSPI3 */
   0x52204000      	    /* MCSPI4 */
};

#ifdef __cplusplus
}
#endif

#define  SPI_STOP_SEC_CONFIG_DATA
#include "Spi_MemMap.h"


/*******************************************************************************
 *  END OF FILE: Spi_PBcfg.c
 ******************************************************************************/
[!ELSE!]
/* The last generated configuration variant is not
POST-BUILD variant. Refer Spi_Cfg.c/Spi_LCfg.c */
[!ENDIF!]