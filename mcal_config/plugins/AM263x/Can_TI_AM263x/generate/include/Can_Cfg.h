/*
 * TEXAS INSTRUMENTS TEXT FILE LICENSE
 *
 * Copyright (c) 2022-2023 Texas Instruments Incorporated
 *
 * All rights reserved not granted herein.
 *
 * Limited License.
 *
 * Texas Instruments Incorporated grants a world-wide, royalty-free, non-exclusive
 * license under copyrights and patents it now or hereafter owns or controls to
 * make, have made, use, import, offer to sell and sell ("Utilize") this software
 * subject to the terms herein. With respect to the foregoing patent license,
 * such license is granted solely to the extent that any such patent is necessary
 * to Utilize the software alone. The patent license shall not apply to any
 * combinations which include this software, other than combinations with devices
 * manufactured by or for TI ("TI Devices"). No hardware patent is licensed hereunder.
 *
 * Redistributions must preserve existing copyright notices and reproduce this license
 * (including the above copyright notice and the disclaimer and (if applicable) source
 * code license limitations below) in the documentation and/or other materials provided
 * with the distribution.
 *
 * Redistribution and use in binary form, without modification, are permitted provided
 * that the following conditions are met:
 * No reverse engineering, decompilation, or disassembly of this software is
 * permitted with respect to any software provided in binary form.
 * Any redistribution and use are licensed by TI for use only with TI Devices.
 * Nothing shall obligate TI to provide you with source code for the software
 * licensed and provided to you in object code.
 *
 * If software source code is provided to you, modification and redistribution of the
 * source code are permitted provided that the following conditions are met:
 * Any redistribution and use of the source code, including any resulting derivative
 * works, are licensed by TI for use only with TI Devices.
 * Any redistribution and use of any object code compiled from the source code
 * and any resulting derivative works, are licensed by TI for use only with TI Devices.
 *
 * Neither the name of Texas Instruments Incorporated nor the names of its suppliers
 * may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * DISCLAIMER.
 *
 * THIS SOFTWARE IS PROVIDED BY TI AND TI'S LICENSORS "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL TI AND TI'S
 * LICENSORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 /***************************************************************************
  Project: [!"$project"!]

  This file is generated by EB Tresos
  Do not modify this file, otherwise the software may behave in unexpected way.

 *****************************************************************************/

/**
 *  \file     Can_Cfg.h
 *
 *  \brief    This file contains generated pre compile configuration file for
 *            CAN MCAL driver
 *
 */


#ifndef CAN_CFG_H_
#define CAN_CFG_H_

/**
 * \addtogroup CAN Can
 * @{
 */

[!IF "not(node:empty(as:modconf('Can')[1]/CanDemEventParameterRefs/*))"!][!//
#include "Dem.h"
[!ENDIF!][!//
[!IF "not(node:empty(as:modconf('Can')[1]/CanGeneral/CanOsCounterRef))"!][!//
#include "Os.h"
[!ENDIF!][!//
#ifdef __cplusplus
extern "C" {
#endif

#ifndef DOXYGEN_SHOULD_SKIP_THIS

/** \brief CAN Config ID */
#define CAN_CFG_ID          (CAN_CFG_ID_0)

/**
*  \brief CAN Build Variant.
*   Build variants.(i.e Pre Compile,Post Build)
*/

#define CAN_VARIANT_PRE_COMPILE     [!IF "as:modconf('Can')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPreCompile'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!][!//

#define CAN_VARIANT_POST_BUILD      [!IF "as:modconf('Can')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPostBuild'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!][!//

[!IF "as:modconf('Can')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPreCompile'"!]
[!LOOP "as:modconf('Can')[1]/CanConfigSet"!]
/**
*  \brief Pre Compile config macro name.
*/
#define CAN_INIT_CONFIG_PC       Can_Config
[!ENDLOOP!]
[!ENDIF!]
/**
 *  \name Can Driver Configuration SW Version Info
 *
 *  Defines for CAN Driver configuration version
 *  @{
 */
/** \brief Can configuration Major Version */
#define CAN_CFG_MAJOR_VERSION           ([!"substring-before($moduleSoftwareVer,'.')"!]U)
/** \brief Can configuration Minor Version */
#define CAN_CFG_MINOR_VERSION           ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)
/** \brief Can configuration Patch Version */
#define CAN_CFG_PATCH_VERSION           ([!"substring-after(substring-after($moduleSoftwareVer,'.'),'.')"!]U)
/* @} */


/**
 *  \name Can service enable/disable defines
 *
 *  Pre-compile switches for enabling/disabling CAN MCAL APIs
 *  @{
 */

 /** \brief Enable/Disable Can_GetVersionInfo */
#define CAN_VERSION_INFO_API   [!IF "as:modconf('Can')[1]/CanGeneral/CanVersionInfoApi = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable DEV error detection */
#define CAN_DEV_ERROR_DETECT  [!IF "as:modconf('Can')[1]/CanGeneral/CanDevErrorDetect = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Can_DeInit API */
#define CAN_DEINIT_API  [!IF "as:modconf('Can')[1]/CanGeneral/CanDeInitApi = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Can_SetBaudrate API */
#define CAN_SET_BAUDRATE_API  [!IF "as:modconf('Can')[1]/CanGeneral/CanSetBaudrateApi = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Can_TestLoopBackModeEnable */
#define CAN_LOOPBACK_ENABLE   [!IF "as:modconf('Can')[1]/CanGeneral/CanLoopBackTest_Enable = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Can_ConfigRegReadBack */
#define CAN_REGISTER_READBACK_API           [!IF "as:modconf('Can')[1]/CanGeneral/CanRegisterReadbackAPI = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Can_CheckWakeup */
#define CAN_WAKEUP_FUNCTIONALITY_API        [!IF "count(as:modconf('Can')[1]/CanConfigSet/CanController/*[CanWakeupFunctionalityAPI = 'true']) > 0"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable Multiplexed Transmission */
#define CAN_MULTIPLEXED_TRANSMISSION_ENABLE [!IF "as:modconf('Can')[1]/CanGeneral/CanMultiplexedTransmission = 'true'"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
/** \brief Enable/Disable CanIf_TriggerTransmit */
#define CAN_TRIGGER_TRANSMIT_ENABLE [!IF "count(as:modconf('Can')[1]/CanConfigSet/CanHardwareObject/*[CanTriggerTransmitEnable/* = 'true']) > 0"!](STD_ON)[!ELSE!](STD_OFF)[!ENDIF!]
[!VAR "Txpolling" = "'0'"!][!//
[!VAR "Rxpolling" = "'0'"!][!//
[!VAR "BusOffpolling" = "'0'"!][!//
[!VAR "WakeUppolling" = "'0'"!][!//
[!LOOP "as:modconf('Can')[1]/CanConfigSet/CanController/*"!][!//
[!IF "CanRxProcessing = 'POLLING' or CanRxProcessing = 'MIXED' "!][!//
[!VAR "Rxpolling" = "$Rxpolling+1"!][!//
[!ENDIF!][!//
[!IF "CanTxProcessing = 'POLLING' or CanTxProcessing = 'MIXED' "!][!//
[!VAR "Txpolling" = "$Txpolling+1"!][!//
[!ENDIF!][!//
[!IF "CanBusoffProcessing = 'POLLING' "!][!//
[!VAR "BusOffpolling" = "$BusOffpolling+1"!][!//
[!ENDIF!][!//
[!IF "CanWakeupProcessing = 'POLLING' "!][!//
[!VAR "WakeUppolling" = "$WakeUppolling+1"!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
/** \brief Enable/Disable Can_MainFunction_Write */
#define CAN_TX_POLLING      ([!IF "$Txpolling != num:i(0)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!])
/** \brief Enable/Disable Can_MainFunction_Read */
#define CAN_RX_POLLING      ([!IF "$Rxpolling != num:i(0)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!])
/** \brief Enable/Disable Can_MainFunction_BusOff */
#define CAN_BUSOFF_POLLING  ([!IF "$BusOffpolling != num:i(0)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!])
/** \brief Enable/Disable Can_MainFunction_Wakeup */
#define CAN_WAKEUP_POLLING  ([!IF "$WakeUppolling != num:i(0)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!])
/** \brief Enable/Disable single bit ECC logic */
#define CAN_ECC_ENABLE      STD_OFF

/* @} */

/**
 *  \name Can Controllers
 * @{
 */
 /** \brief Max number of controllers defined*/
[!VAR "varmax" = "0"!][!//
[!LOOP "as:modconf('Can')[1]/CanConfigSet/CanController/*"!][!//
[!VAR "varmax" = "$varmax+1"!][!//
[!ENDLOOP!][!//
#define CAN_NUM_CONTROLLER          ([!"num:i($varmax)"!]U)
/** \brief Max number of mailboxes defined*/
[!VAR "varmax" = "0"!][!//
[!LOOP "as:modconf('Can')[1]/CanConfigSet/CanHardwareObject/*"!][!//
[!VAR "varmax" = "$varmax+1"!][!//
[!ENDLOOP!][!//
#define CAN_NUM_MAILBOXES           ([!"num:i($varmax)"!]U)
/** \brief Max number of mailboxes per controller */
[!//
#define CAN_MAX_CONTROLLER          (4U)
/** \brief Total Number of TX mailboxes */[!//

[!VAR "txmailbox" = "0"!][!//
[!LOOP "as:modconf('Can')[1]/CanConfigSet/CanHardwareObject/*"!][!//
[!IF "CanObjectType = 'TRANSMIT'"!][!//
[!VAR "txmailbox"="$txmailbox+1"!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
#define CAN_NUM_TX_MAILBOXES 		([!"num:i($txmailbox)"!]U)
/* @} */
/**
 *  \name Can Controller Id names
 *
 *  Defines for symbolic names for the CanControllerIds
 *  @{
 */
[!LOOP "as:modconf('Can')[1]/CanConfigSet"!][!//
[!LOOP "CanController/*"!][!//
#define CanConf_CanController_[!"@name"!]   ([!"CanControllerId"!]U)
[!ENDLOOP!][!ENDLOOP!][!//

[!LOOP "as:modconf('Can')[1]/CanConfigSet/CanController/*"!][!//
#define CAN_CONTROLLER_[!"CanControllerInstance"!]
[!ENDLOOP!][!//
[!VAR "CanController0AlreadyConfigured" = "0"!][!//
[!VAR "CanController1AlreadyConfigured" = "0"!][!//
[!VAR "CanController2AlreadyConfigured" = "0"!][!//
[!VAR "CanController3AlreadyConfigured" = "0"!][!//
[!LOOP "as:modconf('Can')[1]/CanConfigSet"!][!//
[!LOOP "CanController/*"!][!//
[!IF "CanControllerInstance = 'MCAN0'"!][!//
[!VAR "CanController0AlreadyConfigured" = "$CanController0AlreadyConfigured+1"!][!//
[!IF "(num:i($CanController0AlreadyConfigured)) > '1'"!][!ERROR "Controller Instance MCAN0 is already configured"!][!ENDIF!][!//
[!ENDIF!][!//
[!IF "CanControllerInstance = 'MCAN1'"!][!//
[!VAR "CanController1AlreadyConfigured" = "$CanController1AlreadyConfigured+1"!][!//
[!IF "(num:i($CanController1AlreadyConfigured)) > '1'"!][!ERROR "Controller Instance MCAN1 is already configured"!][!ENDIF!][!//
[!ENDIF!][!//
[!IF "CanControllerInstance = 'MCAN2'"!][!//
[!VAR "CanController2AlreadyConfigured" = "$CanController2AlreadyConfigured+1"!][!//
[!IF "(num:i($CanController2AlreadyConfigured)) > '1'"!][!ERROR "Controller Instance MCAN2 is already configured"!][!ENDIF!][!//
[!ENDIF!][!//
[!IF "CanControllerInstance = 'MCAN3'"!][!//
[!VAR "CanController3AlreadyConfigured" = "$CanController3AlreadyConfigured+1"!][!//
[!IF "(num:i($CanController3AlreadyConfigured)) > '1'"!][!ERROR "Controller Instance MCAN3 is already configured"!][!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!ENDLOOP!][!//

/* @} */
/**
 *  \name Can HW Object names
 *
 *  Defines for symbolic names for the CanHardwareObjectIds
 *  @{
 */
[!LOOP "as:modconf('Can')[1]/CanConfigSet"!][!//
[!VAR "CanObjectIdIndx" = "0"!]
[!LOOP "CanHardwareObject/*"!][!//
#define CanConf_CanHardwareObject_[!"@name"!]   ([!"CanObjectId"!]U)
#define CAN_HTRH_[!"@index"!]         (CanConf_CanHardwareObject_[!"@name"!])
[!IF "(num:i($CanObjectIdIndx)) != CanObjectId"!][!ERROR "Can Object Id should start with 0,should be unique, increment by 1 and continue without any gaps"!][!ENDIF!][!//
[!VAR "CanObjectIdIndx" = "$CanObjectIdIndx+1"!]
[!ENDLOOP!][!ENDLOOP!][!//
/* @} */

/**
 *  \name Can misc configurations
 *  @{
 */
/** \brief Counter ID for counter used to count wait ticks */
#define CAN_OS_COUNTER_ID               ((CounterType)[!IF "not(node:empty(as:modconf('Can')[1]/CanGeneral/CanOsCounterRef))"!][!"node:name(node:ref(as:modconf('Can')[1]/CanGeneral/CanOsCounterRef))"!][!ELSE!][!"as:modconf('Can')[1]/CanGeneral/CanDefaultOSCounterId"!]U[!ENDIF!])

/**
*  \brief CAN timeout - used in CAN IFCMD busy wait and Start/Stop busy wait.
*   Specifies the maximum time for blocking function until a timeout is detected.
*   Unit is milli seconds.
*/
#define CAN_TIMEOUT_DURATION            ([!"num:i(num:mul(as:modconf('Can')[1]/CanGeneral/CanTimeoutDuration,1000))"!]U)
/** \brief Enable/Disable OSEK Category 1 ISR */
#define CAN_ISR_TYPE                ([!"as:modconf('Can')[1]/CanGeneral/CanTypeofInterruptFunction"!])


/* @} */
[!IF "node:exists(as:modconf('Can')[1]/CanGeneral/CanLPduReceiveCalloutFunction/*) = 'true'"!]
/**
*  \brief CAN LPdu Callout - This parameter defines the existence and the name
*	of a callout function that is called after a successful reception of a
*	received CAN Rx L-PDU. If this parameter is omitted no callout shall
*	take place.
*/
#define CAN_LPDU_CALLOUT            [!"as:modconf('Can')[1]/CanGeneral/CanLPduReceiveCalloutFunction/*"!]
extern boolean [!"as:modconf('Can')[1]/CanGeneral/CanLPduReceiveCalloutFunction/*"!](uint8 Hrh, Can_IdType CanId, uint8 CanDataLegth,
													const uint8* CanSduPtr);
[!ENDIF!]
/**
 *  \name CAN DEM Error codes to report
 *
 *  Pre-compile switches for enabling/disabling DEM events
 *  @{
 */
[!NOCODE!][!//
[!IF "node:exists(as:modconf('Can')[1]/CanDemEventParameterRefs)"!] [!//
[!IF "not(node:exists(as:modconf('Can')[1]/CanDemEventParameterRefs/CAN_E_HARDWARE_ERROR))"!][!WARNING "DEM enabled but no DEM error configured"!][!ENDIF!]
[!ENDIF!][!//
[!ENDNOCODE!][!//
[!IF "node:exists(as:modconf('Can')[1]/CanDemEventParameterRefs/*)"!][!//
#ifndef CAN_E_HARDWARE_ERROR
/** \brief Hardware failed */
#define CAN_E_HARDWARE_ERROR          ([!IF "not(node:empty(as:modconf('Can')[1]/CanDemEventParameterRefs/CAN_E_HARDWARE_ERROR))"!]DemConf_DemEventParameter_[!"node:name(node:ref(as:modconf('Can')[1]/CanDemEventParameterRefs/CAN_E_HARDWARE_ERROR))"!][!ELSE!][!ERROR "No Hardawre refernece is provided to the DEM error configured"!][!ENDIF!])
#endif
[!ENDIF!][!//
/* @} */

#endif /* DOXYGEN_SHOULD_SKIP_THIS */

/* ========================================================================== */
/*                         Structures and Enums                               */
/* ========================================================================== */

/**
 * \brief Can Controller instance enum
 */
typedef enum
{
    /** \brief MCAN0 Controller Instance */
    CAN_CONTROLLER_INSTANCE_MCAN0 = 0x0U,
    /** \brief MCAN1 Controller Instance */
    CAN_CONTROLLER_INSTANCE_MCAN1 = 0x1U,
    /** \brief MCAN2 Controller Instance */
    CAN_CONTROLLER_INSTANCE_MCAN2 = 0x2U,
    /** \brief MCAN3 Controller Instance */
    CAN_CONTROLLER_INSTANCE_MCAN3 = 0x3U

} Can_ControllerInstance;

/**
 *  \name Can Configuration Structure
 *
 *  @{
 */
[!LOOP "as:modconf('Can')[1]/CanConfigSet"!]
extern const struct Can_ConfigType_s Can_Config;
[!LOOP "CanController/*"!]
extern const struct Can_ControllerStruct_PC [!"../../@name"!]_PC_[!"@name"!];
[!ENDLOOP!]

/** \brief CAN Controller Pre Compile Configuration List */
extern const struct Can_ControllerStruct_PC
    *[!"@name"!]_CanController_List_PC[CAN_NUM_CONTROLLER];

/** \brief CAN Mailbox Pre Compile Configuration List */
extern const struct Can_MailboxStruct_PC
    *[!"@name"!]_CanHardwareObject_List_PC[CAN_NUM_MAILBOXES];

[!ENDLOOP!]
/* @} */
#ifdef __cplusplus
}
#endif

/**
* @}
*/

#endif /*CAN_CFG_H__*/

/**********************************************************************************************************************
 *  END OF FILE: Can_Cfg.h
 *********************************************************************************************************************/
