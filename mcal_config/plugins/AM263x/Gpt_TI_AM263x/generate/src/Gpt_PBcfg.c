[!IF "as:modconf('Gpt')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPostBuild'"!]
/*
 * TEXAS INSTRUMENTS TEXT FILE LICENSE
 *
 * Copyright (c) 2022 Texas Instruments Incorporated
 *
 * All rights reserved not granted herein.
 *
 * Limited License.
 *
 * Texas Instruments Incorporated grants a world-wide, royalty-free, non-exclusive
 * license under copyrights and patents it now or hereafter owns or controls to
 * make, have made, use, import, offer to sell and sell ("Utilize") this software
 * subject to the terms herein. With respect to the foregoing patent license,
 * such license is granted solely to the extent that any such patent is necessary
 * to Utilize the software alone. The patent license shall not apply to any
 * combinations which include this software, other than combinations with devices
 * manufactured by or for TI ("TI Devices"). No hardware patent is licensed hereunder.
 *
 * Redistributions must preserve existing copyright notices and reproduce this license
 * (including the above copyright notice and the disclaimer and (if applicable) source
 * code license limitations below) in the documentation and/or other materials provided
 * with the distribution.
 *
 * Redistribution and use in binary form, without modification, are permitted provided
 * that the following conditions are met:
 * No reverse engineering, decompilation, or disassembly of this software is
 * permitted with respect to any software provided in binary form.
 * Any redistribution and use are licensed by TI for use only with TI Devices.
 * Nothing shall obligate TI to provide you with source code for the software
 * licensed and provided to you in object code.
 *
 * If software source code is provided to you, modification and redistribution of the
 * source code are permitted provided that the following conditions are met:
 * Any redistribution and use of the source code, including any resulting derivative
 * works, are licensed by TI for use only with TI Devices.
 * Any redistribution and use of any object code compiled from the source code
 * and any resulting derivative works, are licensed by TI for use only with TI Devices.
 *
 * Neither the name of Texas Instruments Incorporated nor the names of its suppliers
 * may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * DISCLAIMER.
 *
 * THIS SOFTWARE IS PROVIDED BY TI AND TI'S LICENSORS "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL TI AND TI'S
 * LICENSORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 *  \file     Gpt_PBcfg.c
 *
 *  \brief    This file contains generated post build configuration file
 *            for GPT MCAL driver
 *
 */

 /*********************************************************************************************************************
    Project: [!"$project"!]
    [!"$moduleSoftwareVer"!]
    [!"$moduleSpecVer"!]
    [!"$moduleReleaseVer"!]

    This file is generated by EB Tresos
    Do not modify this file, otherwise the software may behave in unexpected way.

 *********************************************************************************************************************/
#include "Std_Types.h"
#include "Gpt.h"

#define GPT_PBCFG_C_MAJOR_VERSION    ([!"substring-before($moduleSoftwareVer,'.')"!]U)
#define GPT_PBCFG_C_MINOR_VERSION    ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)
#define GPT_PBCFG_C_PATCH_VERSION    ([!"substring-after(substring-after($moduleSoftwareVer,'.'),'.')"!]U)

/* ---- Perform version checking  ----------------------------------------- */

#if ((GPT_SW_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U))||(GPT_SW_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
    #error "Version numbers of Gpt_PBcfg.c and Gpt.h are inconsistent!"
#endif

#if ((GPT_CFG_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U))||(GPT_CFG_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
  #error "Version numbers of Gpt_PBcfg.c and Gpt_Cfg.h are inconsistent!"
#endif


#define GPT_START_SEC_CONST_UNSPECIFIED
#include "Gpt_MemMap.h"


/*LDRA_INSPECTED 25 D : MISRAC_2012_R.8.9
 * "Reason - Global scope for the register base address" */
const uint32 Gpt_RTIChannelAddr[GPT_RTI_MODULES] =
{
    SOC_RTI1_REG_BASE,
    SOC_RTI2_REG_BASE,
    SOC_RTI3_REG_BASE,
	SOC_RTI4_REG_BASE
};

#define GPT_STOP_SEC_CONST_UNSPECIFIED
/*LDRA_INSPECTED 338 S : MISRAC_2012_R.20.1
 * "Reason - Required to comply with AUTOSAR memmap spec " */
#include "Gpt_MemMap.h"

#define GPT_START_SEC_CONFIG_DATA
/* MCAL: MISRAC_19.1
 * "Reason - This is the format to use for specifying memory sections." */
#include "Gpt_MemMap.h"

[!MACRO "ChModeTranslate", "ref" = ""!][!//
[!IF "$ref = 'GPT_CH_MODE_CONTINUOUS'"!][!//
GPT_CH_MODE_CONTINUOUS[!//
[!ELSE!][!//
GPT_CH_MODE_ONESHOT[!//
[!ENDIF!][!//
[!ENDMACRO!][!//
[!//
[!VAR "notifyFxnList" = "' '"!][!//
[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!IF "not(node:empty(GptNotification)) and not(text:match(GptNotification,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(GptNotification)))"!][!//
[!"concat('extern void ',GptNotification,'(void);')"!]
[!VAR "notifyFxnList" = "concat($notifyFxnList,' ',GptNotification)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//

[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!VAR "NumChannels" = "num:i(count(GptChannelConfiguration/*))"!][!//
/* Gpt Channel Configuration parameters */
static CONST(Gpt_ChannelConfigType, GPT_PBCFG) [!"@name"!]_ChannelConfig[[!"$NumChannels"!]] =
{
[!VAR "Index" = "0"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!WS "4"!][[!"num:i($Index)"!]] =
[!WS "4"!]{
[!WS "8"!].ChannelId = (GPT_RTI_CHANNEL[!"string(num:i(GptChannelId) + 1)"!]),
[!WS "8"!].ChannelMode = ([!CALL "ChModeTranslate","ref" = "GptChannelMode"!]),  /* Gpt Channel Mode */
[!WS "8"!].CounterBlk = [!"GptCounterBlkId"!],
[!VAR "Id" = "num:i(GptChannelId)"!][!//
[!VAR "bkId" = "'GptCounterBlkId'"!][!//
[!VAR "bkId" = "text:match(node:value(GptCounterBlkId),'COUNTER0')"!][!//
[!IF "$bkId"!][!//
[!IF "$Id <= '3'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule0CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '7'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule1CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '11'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule2CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSE!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule3CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ENDIF!][!//
[!ELSE!][!//
[!IF "$Id <= '3'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule0CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '7'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule1CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '11'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule2CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSE!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule3CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ENDIF!][!//
[!ENDIF!]
[!WS "8"!].Notification_pt = [!IF "not(node:empty(GptNotification))"!][!"GptNotification"!][!ELSE!](Gpt_NotifyType)NULL_PTR[!ENDIF!],  /* Notification Call Back function */
[!WS "8"!].GptChannelClksrcRef = [!"num:i(200.0)"!]U  /* Gpt Clock derived from Mcu in MHz*/
[!WS "4"!]}[!VAR "Index" = "$Index+1"!][!IF "not(node:islast())"!],[!ENDIF!]
[!ENDLOOP!][!//
};

/*<GPT_CONFIGURATION>*/
CONST(Gpt_ConfigType, GPT_PBCFG) Gpt_Config =
{
[!WS "4"!][!"@name"!]_ChannelConfig,/*Pointer to Channel Configuration*/
[!WS "4"!][!"num:i($NumChannels)"!]/*Number of Channels*/
};
[!ENDLOOP!]
/*</GPT_CONFIGURATION>*/
#define GPT_STOP_SEC_CONFIG_DATA
#include "Gpt_MemMap.h"
[!NOCODE!][!//
[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!VAR "crt_id" = "GptChannelId"!][!//
[!VAR "n"="0"!][!//
[!LOOP "../../GptChannelConfiguration/*"!][!//
[!VAR "crt_id1" = "GptChannelId"!][!//
[!IF "$crt_id=$crt_id1"!][!VAR "n"="$n+1"!][!ENDIF!][!//
[!ENDLOOP!][!//
[!IF "$n > 1"!][!ERROR "Gpt Channel Id is duplicated. Gpt Channel Id's must be unique across configuration."!][!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//
[!ENDNOCODE!][!//
/*----- End of File --------------------------------------------------------*/

[!ELSE!]
/* The last generated configuration variant is not
POST-BUILD variant. Refer Gpt_Cfg.c. */
[!ENDIF!]