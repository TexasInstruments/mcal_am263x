[!IF "as:modconf('Gpt')[1]/IMPLEMENTATION_CONFIG_VARIANT = 'VariantPostBuild'"!]
/* ======================================================================
 *   Copyright (C) 2022 Texas Instruments Incorporated
 *
 *   All rights reserved. Property of Texas Instruments Incorporated.
 *   Restricted rights to use, duplicate or disclose this code are
 *   granted through contract.
 *
 *   The program may not be used without the written permission
 *   of Texas Instruments Incorporated or against the terms and conditions
 *   stipulated in the agreement under which this program has been
 *   supplied.
 * ==================================================================== */

/**
 *  \file     Gpt_PBcfg.c
 *
 *  \brief    This file contains generated post build configuration file
 *            for GPT MCAL driver
 *
 */

 /*********************************************************************************************************************
    Project: [!"$project"!]
    [!"$moduleSoftwareVer"!]
    [!"$moduleSpecVer"!]
    [!"$moduleReleaseVer"!]

    This file is generated by EB Tresos
    Do not modify this file, otherwise the software may behave in unexpected way.

 *********************************************************************************************************************/
#include "Std_Types.h"
#include "Gpt.h"

#define GPT_PBCFG_C_MAJOR_VERSION    ([!"substring-before($moduleSoftwareVer,'.')"!]U)
#define GPT_PBCFG_C_MINOR_VERSION    ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)
#define GPT_PBCFG_C_PATCH_VERSION    ([!"substring-after(substring-after($moduleSoftwareVer,'.'),'.')"!]U)

/* ---- Perform version checking  ----------------------------------------- */

#if ((GPT_SW_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U))||(GPT_SW_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
    #error "Version numbers of Gpt_PBcfg.c and Gpt.h are inconsistent!"
#endif

#if ((GPT_CFG_MAJOR_VERSION != ([!"substring-before($moduleSoftwareVer,'.')"!]U))||(GPT_CFG_MINOR_VERSION != ([!"substring-before(substring-after($moduleSoftwareVer,'.'),'.')"!]U)))
  #error "Version numbers of Gpt_PBcfg.c and Gpt_Cfg.h are inconsistent!"
#endif


#define GPT_START_SEC_CONST_UNSPECIFIED
#include "Gpt_MemMap.h"


/*LDRA_INSPECTED 25 D : MISRAC_2012_R.8.9
 * "Reason - Global scope for the register base address" */
const uint32 Gpt_RTIChannelAddr[GPT_RTI_MODULES] =
{
    SOC_RTI1_REG_BASE,
    SOC_RTI2_REG_BASE,
    SOC_RTI3_REG_BASE,
	SOC_RTI4_REG_BASE
};

#define GPT_STOP_SEC_CONST_UNSPECIFIED
/*LDRA_INSPECTED 338 S : MISRAC_2012_R.20.1
 * "Reason - Required to comply with AUTOSAR memmap spec " */
#include "Gpt_MemMap.h"

#define GPT_START_SEC_CONFIG_DATA
/* MCAL: MISRAC_19.1
 * "Reason - This is the format to use for specifying memory sections." */
#include "Gpt_MemMap.h"

[!MACRO "ChModeTranslate", "ref" = ""!][!//
[!IF "$ref = 'GPT_CH_MODE_CONTINUOUS'"!][!//
GPT_CH_MODE_CONTINUOUS[!//
[!ELSE!][!//
GPT_CH_MODE_ONESHOT[!//
[!ENDIF!][!//
[!ENDMACRO!][!//
[!//
[!VAR "notifyFxnList" = "' '"!][!//
[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!IF "not(node:empty(GptNotification)) and not(text:match(GptNotification,'NULL_PTR'))"!][!//
[!IF "not(node:containsValue(text:split($notifyFxnList),node:value(GptNotification)))"!][!//
[!"concat('extern void ',GptNotification,'(void);')"!]
[!VAR "notifyFxnList" = "concat($notifyFxnList,' ',GptNotification)"!][!//
[!ENDIF!][!//
[!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//

[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!VAR "NumChannels" = "num:i(count(GptChannelConfiguration/*))"!][!//
/* Gpt Channel Configuration parameters */
static CONST(Gpt_ChannelConfigType, GPT_PBCFG) [!"@name"!]_ChannelConfig[[!"$NumChannels"!]] =
{
[!VAR "Index" = "0"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!WS "4"!][[!"num:i($Index)"!]] =
[!WS "4"!]{
[!WS "8"!].ChannelId = (GPT_RTI_CHANNEL[!"string(num:i(GptChannelId) + 1)"!]),
[!WS "8"!].ChannelMode = ([!CALL "ChModeTranslate","ref" = "GptChannelMode"!]),  /* Gpt Channel Mode */
[!WS "8"!].CounterBlk = [!"GptCounterBlkId"!],
[!VAR "Id" = "num:i(GptChannelId)"!][!//
[!VAR "bkId" = "'GptCounterBlkId'"!][!//
[!VAR "bkId" = "text:match(node:value(GptCounterBlkId),'COUNTER0')"!][!//
[!IF "$bkId"!][!//
[!IF "$Id <= '3'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule0CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '7'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule1CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '11'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule2CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSE!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule3CounterBlk0Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ENDIF!][!//
[!ELSE!][!//
[!IF "$Id <= '3'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule0CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '7'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule1CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSEIF "$Id <= '11'"!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule2CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ELSE!][!//
[!WS "8"!].GptChannelTickFrequency = [!" as:modconf('Gpt')[1]/GptDriverConfiguration/GptModule3CounterBlk1Frequency"!]U,  /* Pre-scalar value to be set */[!//
[!ENDIF!][!//
[!ENDIF!]
[!WS "8"!].Notification_pt = [!IF "not(node:empty(GptNotification))"!][!"GptNotification"!][!ELSE!](Gpt_NotifyType)NULL_PTR[!ENDIF!],  /* Notification Call Back function */
[!WS "8"!].GptChannelClksrcRef = [!"num:i(200.0)"!]U  /* Gpt Clock derived from Mcu in MHz*/
[!WS "4"!]}[!VAR "Index" = "$Index+1"!][!IF "not(node:islast())"!],[!ENDIF!]
[!ENDLOOP!][!//
};

/*<GPT_CONFIGURATION>*/
CONST(Gpt_ConfigType, GPT_PBCFG) Gpt_Config =
{
[!WS "4"!][!"@name"!]_ChannelConfig,/*Pointer to Channel Configuration*/
[!WS "4"!][!"num:i($NumChannels)"!]/*Number of Channels*/
};
[!ENDLOOP!]
/*</GPT_CONFIGURATION>*/
#define GPT_STOP_SEC_CONFIG_DATA
#include "Gpt_MemMap.h"
[!NOCODE!][!//
[!LOOP "as:modconf('Gpt')[1]/GptChannelConfigSet/*"!][!//
[!LOOP "GptChannelConfiguration/*"!][!//
[!VAR "crt_id" = "GptChannelId"!][!//
[!VAR "n"="0"!][!//
[!LOOP "../../GptChannelConfiguration/*"!][!//
[!VAR "crt_id1" = "GptChannelId"!][!//
[!IF "$crt_id=$crt_id1"!][!VAR "n"="$n+1"!][!ENDIF!][!//
[!ENDLOOP!][!//
[!IF "$n > 1"!][!ERROR "Gpt Channel Id is duplicated. Gpt Channel Id's must be unique across configuration."!][!ENDIF!][!//
[!ENDLOOP!][!//
[!ENDLOOP!][!//
[!ENDNOCODE!][!//
/*----- End of File --------------------------------------------------------*/

[!ELSE!]
/* The last generated configuration variant is not
POST-BUILD variant. Refer Gpt_Cfg.c. */
[!ENDIF!]