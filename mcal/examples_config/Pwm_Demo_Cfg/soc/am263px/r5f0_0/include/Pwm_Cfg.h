/* ======================================================================
 *   Copyright (C) 2023 Texas Instruments Incorporated
 *
 *   All rights reserved. Property of Texas Instruments Incorporated.
 *   Restricted rights to use, duplicate or disclose this code are
 *   granted through contract.
 *
 *   The program may not be used without the written permission
 *   of Texas Instruments Incorporated or against the terms and conditions
 *   stipulated in the agreement under which this program has been
 *   supplied.
 * ==================================================================== */

/*

 *  -------------------------------------------------------------------------------------------------------------------
 *  FILE DESCRIPTION
 *  -------------------------------------------------------------------------------------------------------------------
 *         File:  Pwm_Cfg.h
 *      Project:  TI Sitara PWM driver configuration
 *       Module:  Pwm
 *    Generator:  EB Tresos
 *
 *  Description:  This component provides services for initialization and control of the microcontroller internal
 *                PWM unit (pulse width modulation). The PWM module generates pulses with variable pulse width.
 *                It allows the selection of the duty cycle and the signal period time.
 *

*******************************************************************************************************************/

/**********************************************************************************************************************
    Project: Mcal_Demo_Cfg


    This file is generated by EB Tresos
    Do not modify this file, otherwise the software may behave in unexpected way.

 *********************************************************************************************************************/
#ifndef PWM_CFG_H
#define PWM_CFG_H

#ifdef __cplusplus
extern "C" {
#endif

/**
 * \addtogroup PWM Pwm
 * @{
 */

#include "Std_Types.h"
#include "Os.h"

#ifndef DOXYGEN_SHOULD_SKIP_THIS
/* ========================================================================== */
/*                           Macros & Typedefs                                */
/* ========================================================================== */
/**
 *  \brief PWM Build Variant.
 *   Build variants.(i.e Pre-compile,Post-build or Link time)
 */
#define PWM_PRE_COMPILE_VARIANT         (STD_OFF)

#define PWM_VARIANT_POST_BUILD          (STD_ON )

/**
 *  \name Pwm Driver Configuration SW Version Info
 *
 *  Defines for Pwm Driver configuration version
 *  @{
 */
/** \brief Pwm configuration Major Version */
#define PWM_CFG_MAJOR_VERSION           (10U)
/** \brief Pwm configuration Minor Version */
#define PWM_CFG_MINOR_VERSION           (2U)
/** \brief Pwm configuration Patch Version */
#define PWM_CFG_PATCH_VERSION           (0U)
/* @} */


/** \brief PWM Config ID */
#define PWM_CFG_ID                      (0U)

 /** \brief Enable/Disable PWM DeInit API */
#define PWM_DEINIT_API      (STD_ON)

/** \brief Enable/Disable PWM GetOutputState API */
#define PWM_GET_OUTPUT_STATE_API		(STD_OFF)

/** \brief Enable/Disable PWM SetDutyCycle API */
#define PWM_SET_DUTY_CYCLE_API      (STD_ON)

/** \brief Enable/Disable PWM SetOutputToIdle API */
#define PWM_SET_OUTPUT_TO_IDLE_API      (STD_ON)

/** \brief Enable/Disable PWM SetPeriodAndDuty API */
#define PWM_SET_PERIOD_AND_DUTY_API     (STD_ON)

/** \brief Enable/Disable PWM VersionInfo API */
#define PWM_VERSION_INFO_API    (STD_ON)

/** \brief Enable/Disable PWM RegisterReadback API */
#define PWM_REGISTER_READBACK_API       (STD_ON)

/** \brief Enable/Disable PWM Dutycycle update always at the end of the period */
#define PWM_DUTYCYCLE_UPDATED_ENDPERIOD     (STD_ON)

/** \brief Enable/Disable PWM Period update always at the end of the period */
#define PWM_PERIOD_UPDATED_ENDPERIOD    (STD_ON)

/** \brief ISR type */
#define PWM_ISR_TYPE    (PWM_ISR_CAT1)

/** \brief Number of configured channels */
#define PWM_MAX_NUM_CHANNELS   (1U)

/** \brief Enable/Disable PWM dev detect error */
#define PWM_DEV_ERROR_DETECT              (STD_ON)

/** \brief Enable/Disable PWM notifications */
#define PWM_NOTIFICATION_SUPPORTED        (STD_ON)

/** \brief Instance ID for driver module. */
#define PWM_INDEX       (0U)
#define PWM_INSTANCE_ID                 (PWM_INDEX)

/**
*  \brief Channel ID
*  Symbolic Names Configured channel ID(s)
*/
#define PwmConf_PwmChannel_PwmChannel_0          (0U)
/**< Channel identifiers */


/** \brief EPWM Channel 1, in MAIN DOMAIN */
#define PWM_CHANNEL_PWM_CONTROLSS_G0_PWMCHANNEL9   (9)

/** \brief Enable/Disable PWM SFO Support for HRPWM */
#define PWM_SFO_SUPPORT_ENABLE             (STD_OFF)

/** \brief OS counter ID - used for timeout in case of error */
#define PWM_OS_COUNTER_ID           ((CounterType)OsCounter_0)

/**
 *  \brief PWM timeout - used in SFO to get status as error
 *   Each tick is 31.25us (for 32K Counter). Wait for 100ms which comes to
 *   below value
 */
#define PWM_MAX_TIMEOUT_DURATION        (2000U)

/** \brief  Maximun number of Hw epwm channel. */
#define PWM_HW_MAX_NUM_CHANNELS               (128U)

/** \brief PWM Channel type.  */
typedef uint32 Pwm_ChannelType;

/** \brief typedef of period value */
typedef uint32 Pwm_PeriodType;

/** \brief typedef of frequency value (Frequency in Hz) */
typedef uint32 Pwm_FrequencyType;

#endif /* DOXYGEN_SHOULD_SKIP_THIS */

/** \brief Output state type */
typedef enum
{
    /** \brief LOW  state */
    PWM_LOW = 0U,
    /** \brief HIGH state */
    PWM_HIGH

} Pwm_OutputStateType;

/** \brief Channel class type */
typedef enum
{
    /** \brief Period is immutable                      */
    PWM_FIXED_PERIOD = 0U,
    /** \brief Period is immutable with phase shift     */
    PWM_FIXED_PERIOD_SHIFTED,
    /** \brief Period is variable                       */
    PWM_VARIABLE_PERIOD

} Pwm_ChannelClassType;

/** \brief EPWM outputs in a single epwm channel. */
typedef enum Pwm_epwmOutputCh
{
    /** \brief Output channel A. */
    PWM_OUTPUT_CH_A  = 0U,
    /** \brief Output channel B. */
    PWM_OUTPUT_CH_B  = 1U,
    /** \brief Both Output channel A and B */
    PWM_OUTPUT_CH_BOTH_A_AND_B = 2U

} Pwm_epwmOutputCh_t;

/** \brief  Notification callback function pointer  */
typedef void (*Pwm_NotifyFuncType)(void);
/** \brief  Pwm channel configuration */
typedef struct
{
    /** \brief channel Id. */
    Pwm_ChannelType      channelId;
    /** \brief channel Hardware Id. */
    Pwm_ChannelType      channelHwId;
    /** \brief Output Select EPWMxA or EPWMxB or both(EPWMxA and EPWMxB) */
    uint32               outputCh;

} Pwm_ChannelConfigType_PC;

/** \brief Pwm configuration structure */
typedef struct Pwm_ConfigType_PC_s
{
    /** \brief Channel configurations */
    Pwm_ChannelConfigType_PC chCfg[PWM_MAX_NUM_CHANNELS];

} Pwm_ConfigType_PC;


/** \brief  Pwm channel configuration */
typedef struct
{
    /** \brief System clock frequency */
    uint32               baseaddr;
    /** \brief System clock frequency */
	uint32               instanceClkHz;
    /** \brief Initial dutycycle */
    uint16               dutyCycle;
    /** \brief Number of HW Unit ticks value which sets initial period */
    uint32               hwPeriod;
    /** \brief Initial polarity */
    Pwm_OutputStateType  polarity;
    /** \brief Initial idle state */
    Pwm_OutputStateType  idleState;
    /** \brief Fixed or Variable period */
    Pwm_ChannelClassType channelClass;
    /** \brief Prescaler, part of PWM HW time-base clock
      *  Range - 0 <= prescale <= 7,  TBCLK = SYSCLK / (prescale)
      *  0x0 = /1 (No prescale)
      *  0x1 = /2
      *  0x2 = /4
      *  0x3 = /8
      *  0x4 = /16
      *  0x5 = /32
      *  0x6 = /64
      *  0x7 = /128
      */
    uint32               prescale;
    /** \brief High-Speed Prescaler, part for PWM HW time-base clock
    *  Range - 0 <= prescale <= 7,  TBCLK = SYSCLK / (hsPrescale x prescale)
    *  0x0 = /1 (No prescale)
    *  0x1 = /2
    *  0x2 = /4
    *  0x3 = /6
    *  0x4 = /8
    *  0x5 = /10
    *  0x6 = /12
    *  0x7 = /14
    */
    uint32               hsPrescale;
    /** \brief Enable High Resolution Capacbility */
    boolean             enableHR;
#if (PWM_NOTIFICATION_SUPPORTED == STD_ON)
    /** \brief Notification handler */
    Pwm_NotifyFuncType   notificationHandler;

#endif
} Pwm_ChannelConfigType;


/** \brief Pwm configuration structure */
typedef struct Pwm_ConfigType_s
{
    /** \brief Channel configurations */
    Pwm_ChannelConfigType chCfg[PWM_MAX_NUM_CHANNELS];

} Pwm_ConfigType;

#if (STD_ON == PWM_REGISTER_READBACK_API)
/**
 *  \brief PWM register readback structure
 */
typedef struct
{
    /*
     * EPWM related registers
     */
    /** \brief Time base control register */
    uint16 pwmTbCtl1;
    /** \brief Time base control register */
    uint16 pwmTbCtl2;
    /** \brief Time base counter phase register */
    uint16 pwmTbPhs;
    /** \brief Time base counter register */
    uint16 pwmTbCnt;

} Pwm_RegisterReadbackType;

#endif  /* #if (STD_ON == PWM_REGISTER_READBACK_API) */

/* ========================================================================== */
/*                         Structures and Enums                               */
/* ========================================================================== */
/** \brief PWM Configuration structure declaration */
extern const struct Pwm_ConfigType_PC_s Pwm_Config_PC;
extern const struct Pwm_ConfigType_s Pwm_Config;



#ifdef __cplusplus
}
#endif

/**
* @}
*/

#endif /* PWM_CFG_H */


/**********************************************************************************************************************
 *  END OF FILE: Pwm_Cfg.h
 *********************************************************************************************************************/

